<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>愛知・三重・冬日の旅</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- 引入 Poppins 字體 -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        muji: {
                            base: '#f4f4f0',
                            card: '#ffffff',
                            text: '#333333',
                            muted: '#9a9a9a',
                            red: '#7F0019',
                            kraft: '#e6e3dc',
                            border: '#e5e5e5',
                        }
                    },
                    fontFamily: {
                        sans: ['"Poppins"', '"Microsoft JhengHei"', '"微軟正黑體"', 'sans-serif'],
                        serif: ['"Poppins"', '"Microsoft JhengHei"', 'serif'],
                    }
                }
            }
        }
    </script>

    <style>
        body {
            background-color: #f4f4f0;
            color: #333333;
            -webkit-tap-highlight-color: transparent;
            padding-bottom: 90px;
            line-height: 1.7;
            letter-spacing: 0.01em;
            font-family: "Poppins", "Microsoft JhengHei", "微軟正黑體", sans-serif;
        }
        
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        .muji-card {
            background: #ffffff;
            border: 1px solid #e5e5e5;
            box-shadow: 0 1px 2px rgba(0,0,0,0.02);
            border-radius: 4px;
        }

        .nav-btn.active { color: #7F0019; position: relative; }
        .nav-btn.active::after {
            content: '';
            position: absolute;
            top: -12px;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            height: 3px;
            background-color: #7F0019;
        }

        .page-section { display: none; animation: fadeIn 0.4s ease-out; }
        .page-section.active { display: block; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        input[type="checkbox"]:checked + span {
            text-decoration: line-through;
            color: #9a9a9a;
        }

        b, strong { font-weight: 600; }
        .font-mono { font-family: "Poppins", monospace; letter-spacing: 0.05em; }
    </style>
</head>
<body>

    <header class="fixed top-0 left-0 right-0 z-40 bg-muji-base/95 backdrop-blur-sm border-b border-muji-border px-6 py-5">
        <div class="flex justify-between items-end">
            <div>
                <h1 class="text-3xl font-bold text-muji-text tracking-tight font-sans">愛知・三重・冬日の旅</h1>
                <p class="text-[10px] font-medium text-muji-muted mt-1 tracking-[0.2em] font-sans">2026.01.02 — 01.09</p>
            </div>
        </div>
    </header>

    <div class="h-24"></div>

    <!-- ==================== PAGE: PLAN ==================== -->
    <section id="page-plan" class="page-section active px-5 max-w-2xl mx-auto">
        <div class="muji-card p-6 mb-8 relative overflow-hidden">
            <div class="absolute top-0 left-0 w-1 h-full bg-muji-red"></div>
            <h3 class="text-[10px] font-bold text-muji-muted uppercase mb-4 tracking-widest">Flight & Hotel / 航班與住宿</h3>
            <div class="space-y-4">
                <div class="flex justify-between items-center pb-3 border-b border-dashed border-muji-border">
                    <div class="flex flex-col">
                        <span class="text-[10px] font-medium text-muji-muted mb-1 uppercase">Jan 02 • UO680</span>
                        <div class="flex items-center gap-2">
                            <span class="font-bold text-2xl font-sans tracking-tighter">HKG</span>
                            <span class="text-xs text-muji-muted">→</span>
                            <span class="font-bold text-2xl font-sans tracking-tighter">NGO</span>
                        </div>
                    </div>
                    <span class="text-xs font-semibold bg-muji-base px-2 py-1 rounded">10:00 - 14:30</span>
                </div>
                <div class="flex justify-between items-center pb-3 border-b border-dashed border-muji-border">
                    <div class="flex flex-col">
                        <span class="text-[10px] font-medium text-muji-muted mb-1 uppercase">Jan 09 • UO681</span>
                        <div class="flex items-center gap-2">
                            <span class="font-bold text-2xl font-sans tracking-tighter">NGO</span>
                            <span class="text-xs text-muji-muted">→</span>
                            <span class="font-bold text-2xl font-sans tracking-tighter">HKG</span>
                        </div>
                    </div>
                    <span class="text-xs font-semibold bg-muji-base px-2 py-1 rounded">15:25 - 19:15</span>
                </div>
                <div class="pt-1 flex items-start gap-4">
                    <div class="mt-1 text-muji-muted"><i class="fa-regular fa-building text-lg"></i></div>
                    <div>
                        <p class="font-bold text-muji-text leading-tight text-sm">Hotel Resol Nagoya | Comfort Hotel Ise | Nagoya JR Gate Tower Hotel</p>
                        <p class="text-[10px] font-medium text-muji-muted mt-1 uppercase tracking-wider">Stay for 2 | 2 | 3 Nights / 入住兩 |兩 | 三晚</p>
                    </div>
                </div>
            </div>
        </div>
        <div id="itinerary-list" class="space-y-8 pl-2"></div>
    </section>

    <!-- ==================== PAGE: GUIDE ==================== -->
    <section id="page-guide" class="page-section px-5 max-w-2xl mx-auto">
        <div class="flex items-center gap-3 mb-8">
            <h2 class="text-2xl font-bold text-muji-text">Guide</h2>
            <span class="h-px bg-muji-border flex-1"></span>
        </div>
        <div class="space-y-8">
            <div>
                <h3 class="text-[10px] font-bold text-muji-red mb-3 tracking-widest uppercase border-b border-muji-red pb-1">Shirakawa-go & Takayama / 白川鄉與高山</h3>
                <div class="muji-card p-5 mb-4">
                    <div class="flex items-center gap-2 mb-3">
                        <i class="fa-solid fa-location-dot text-muji-red text-xs"></i>
                        <span class="text-sm font-bold">一日遊集合資訊</span>
                    </div>
                    <p class="text-xs text-muji-text leading-relaxed">
                        地點：JR名古屋站西口 (Bic Camera側)<br>
                        地標：Bic Camera 後方 Ministop 便利商店門口<br>
                        時間：<span class="text-muji-red font-bold">08:15 集合</span> / 08:30 出發
                    </p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="bg-white p-4 rounded border border-muji-border">
                        <h4 class="text-xs font-bold mb-2 text-muji-text">飛驒高山 (古街散策)</h4>
                        <ul class="text-[11px] space-y-1 text-muji-muted">
                            <li>• 必吃：飛驒牛握壽司 (二四三屋/坂口屋)</li>
                            <li>• 必吃：五平餅、飛驒牛肉串</li>
                            <li>• 景點：高山陣屋、上三之町</li>
                        </ul>
                    </div>
                    <div class="bg-white p-4 rounded border border-muji-border">
                        <h4 class="text-xs font-bold mb-2 text-muji-text">白川鄉合掌村 (世界遺產)</h4>
                        <ul class="text-[11px] space-y-1 text-muji-muted">
                            <li>• 景點：荻町城跡展望台 (俯瞰全村)</li>
                            <li>• 景點：和田家 / 神田家 (入內參參觀)</li>
                            <li>• 注意：冬季路滑，務必穿著防滑鞋</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div>
                <h3 class="text-[10px] font-bold text-muji-red mb-3 tracking-widest uppercase border-b border-muji-red pb-1">Transport / 交通提示</h3>
                <div class="muji-card p-5">
                    <ul class="text-sm space-y-2 text-muji-text">
                        <li>• <span class="font-bold">近鐵特急:</span> 預約 1/4 (10:10) 名古屋 → 伊勢市</li>
                        <li>• <span class="font-bold">近鐵特急:</span> 預約 1/6 (16:15) 伊勢市 → 名古屋</li>
                        <li>• <span class="font-bold">CAN Bus:</span> 抵達伊勢市站後先買一日券 (1300yen)</li>
                        <li>• <span class="font-bold">ICOCA/Suica:</span> 市內移動直接感應即可</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- ==================== PAGE: WALLET ==================== -->
    <section id="page-wallet" class="page-section px-5 max-w-2xl mx-auto">
        <div class="flex items-center gap-3 mb-8">
            <h2 class="text-2xl font-bold text-muji-text">Wallet</h2>
            <span class="h-px bg-muji-border flex-1"></span>
        </div>

        <!-- 匯率設定 -->
        <div class="muji-card p-5 mb-6">
            <div class="flex justify-between items-center">
                <span class="text-[10px] font-bold tracking-widest text-muji-muted uppercase">Rate / 當前匯率</span>
                <div class="flex items-center gap-2">
                    <span class="text-[10px] font-bold text-muji-muted">1 JPY =</span>
                    <input type="number" id="exchange-rate" value="0.052" step="0.001" oninput="updateAllCalculations()" class="w-16 bg-muji-base text-center text-xs p-1 font-mono font-bold rounded">
                    <span class="text-[10px] font-bold text-muji-muted uppercase">HKD</span>
                </div>
            </div>
        </div>

        <!-- 快速換算 -->
        <div class="muji-card p-6 mb-8">
            <h3 class="text-[10px] font-bold text-muji-text mb-4 tracking-widest uppercase">Quick Convert / 快速換算</h3>
            <div class="flex gap-4">
                <div class="relative flex-1">
                    <span class="absolute left-2 top-2 text-[10px] text-muji-muted font-bold">JPY</span>
                    <input type="number" id="calc-input" placeholder="0" oninput="calculate()" class="w-full bg-muji-base border-b border-muji-border pt-5 pb-2 px-2 font-mono font-bold outline-none text-lg">
                </div>
                <div class="flex flex-col justify-end">
                    <div id="calc-result" class="text-xl font-mono font-bold text-muji-red">0.00 HKD</div>
                </div>
            </div>
        </div>

        <!-- 入帳工具 (互換後的位置：上) -->
        <div class="muji-card p-6 mb-8">
            <h3 class="text-[10px] font-bold text-stone-800 mb-4 tracking-widest uppercase">Joint Fund / 入帳工具 (公數)</h3>
            <div class="space-y-4">
                <div class="relative">
                    <span class="absolute left-2 top-2 text-[10px] text-muji-muted font-bold uppercase">Total Inbound / 總存入 (JPY)</span>
                    <input type="number" id="fund-inbound" placeholder="0" oninput="updateFund()" class="w-full bg-muji-base border-b border-muji-border pt-5 pb-2 px-2 font-mono font-bold outline-none text-lg">
                </div>
                <div class="relative">
                    <span class="absolute left-2 top-2 text-[10px] text-muji-muted font-bold uppercase">Total Expenses / 已支出 (JPY)</span>
                    <input type="number" id="fund-expenses" placeholder="0" oninput="updateFund()" class="w-full bg-muji-base border-b border-muji-border pt-5 pb-2 px-2 font-mono font-bold outline-none text-lg">
                </div>
            </div>
            <div class="mt-6 pt-4 border-t border-dashed border-muji-border space-y-3">
                <div class="flex justify-between items-center">
                    <span class="text-xs text-muji-muted">剩餘餘額 (JPY)</span>
                    <span id="fund-balance-jpy" class="font-mono font-bold text-lg">¥ 0</span>
                </div>
                <div class="flex justify-between items-center bg-muji-base p-3 rounded">
                    <span class="text-xs font-bold text-muji-red">折合港幣 (HKD)</span>
                    <span id="fund-balance-hkd" class="font-mono font-bold text-xl text-muji-red">$ 0.00</span>
                </div>
            </div>
        </div>

        <!-- 分帳工具 (互換後的位置：下) -->
        <div class="muji-card p-6 mb-8">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-[10px] font-bold text-muji-stone tracking-widest uppercase">Split Bill / 分帳工具 (每人)</h3>
            </div>
            <div class="space-y-4">
                <div class="relative">
                    <span class="absolute left-2 top-2 text-[10px] text-muji-muted font-bold uppercase">Total JPY / 總金額</span>
                    <input type="number" id="split-total" placeholder="0" oninput="splitBill()" class="w-full bg-muji-base border-b border-muji-border pt-5 pb-2 px-2 font-mono font-bold outline-none text-lg">
                </div>
                <div class="relative">
                    <span class="absolute left-2 top-2 text-[10px] text-muji-muted font-bold uppercase">People / 人數</span>
                    <input type="number" id="split-people" value="4" oninput="splitBill()" class="w-full bg-muji-base border-b border-muji-border pt-5 pb-2 px-2 font-mono font-bold outline-none text-lg">
                </div>
            </div>
            
            <div id="split-result-box" class="mt-6 pt-4 border-t border-dashed border-muji-border">
                <div class="flex justify-between items-end mb-2">
                    <span class="text-xs text-muji-muted font-medium">每人應付 (JPY)</span>
                    <span id="res-jpy-person" class="font-mono font-bold text-lg">¥ 0</span>
                </div>
                <div class="flex justify-between items-end">
                    <span class="text-xs text-muji-red font-bold">每人折合 (HKD)</span>
                    <span id="res-hkd-person" class="font-mono font-bold text-xl text-muji-red">$ 0.00</span>
                </div>
            </div>
        </div>
    </section>

    <!-- ==================== PAGE: LISTS ==================== -->
    <section id="page-lists" class="page-section px-5 max-w-2xl mx-auto">
        <div class="flex items-center gap-3 mb-8">
            <h2 class="text-2xl font-bold text-muji-text">Checklist</h2>
            <span class="h-px bg-muji-border flex-1"></span>
        </div>
        <div class="space-y-8 pb-10">
            <div>
                <h3 class="text-[10px] font-bold text-muji-red mb-3 tracking-widest uppercase border-b border-muji-red pb-1">Elderly Winter Essentials / 長者冬日備品</h3>
                <div class="space-y-3 bg-white p-4 rounded border border-muji-border">
                    <label class="flex items-start gap-3 cursor-pointer">
                        <input type="checkbox" class="mt-1 w-4 h-4 accent-muji-red">
                        <span class="text-sm">發熱內衣/褲 (建議洋蔥式穿法)</span>
                    </label>
                    <label class="flex items-start gap-3 cursor-pointer">
                        <input type="checkbox" class="mt-1 w-4 h-4 accent-muji-red">
                        <span class="text-sm">防滑走路鞋 (雪地與碎石路)</span>
                    </label>
                    <label class="flex items-start gap-3 cursor-pointer">
                        <input type="checkbox" class="mt-1 w-4 h-4 accent-muji-red">
                        <span class="text-sm">保溫瓶 (隨身暖胃必備)</span>
                    </label>
                    <label class="flex items-start gap-3 cursor-pointer">
                        <input type="checkbox" class="mt-1 w-4 h-4 accent-muji-red">
                        <span class="text-sm">暖包、暖貼、防乾燥乳液</span>
                    </label>
                </div>
            </div>
        </div>
    </section>

    <!-- ==================== PAGE: INFO ==================== -->
    <section id="page-info" class="page-section px-5 max-w-2xl mx-auto">
        <div class="flex items-center gap-3 mb-8">
            <h2 class="text-2xl font-bold text-muji-text">Info</h2>
            <span class="h-px bg-muji-border flex-1"></span>
        </div>

        <!-- 天氣預報連結 -->
        <div class="muji-card p-6 mb-8">
            <h3 class="text-[10px] font-bold text-muji-muted mb-4 uppercase tracking-widest">Weather Forecast / 天氣預報</h3>
            <div class="grid grid-cols-3 gap-3">
                <a href="https://weather.yahoo.co.jp/weather/jp/23/5110.html" target="_blank" class="bg-muji-base p-3 rounded text-center transition-opacity hover:opacity-80">
                    <i class="fa-solid fa-cloud-sun text-blue-500 mb-2"></i>
                    <p class="text-[10px] font-bold">名古屋</p>
                </a>
                <a href="https://weather.yahoo.co.jp/weather/jp/24/5310.html" target="_blank" class="bg-muji-base p-3 rounded text-center transition-opacity hover:opacity-80">
                    <i class="fa-solid fa-umbrella text-blue-500 mb-2"></i>
                    <p class="text-[10px] font-bold">伊勢</p>
                </a>
                <a href="https://weather.yahoo.co.jp/weather/jp/21/5220.html" target="_blank" class="bg-muji-base p-3 rounded text-center transition-opacity hover:opacity-80">
                    <i class="fa-solid fa-snowflake text-blue-500 mb-2"></i>
                    <p class="text-[10px] font-bold">高山</p>
                </a>
            </div>
        </div>

        <!-- 地圖查詢工具 -->
        <div class="muji-card p-6 mb-8">
            <h3 class="text-[10px] font-bold text-muji-muted mb-4 uppercase tracking-widest">Map Search / 地圖查詢</h3>
            <div class="flex gap-2">
                <input type="text" id="map-query" placeholder="輸入景點或地址..." class="flex-1 bg-muji-base border-b border-muji-border py-2 px-3 text-sm outline-none">
                <button onclick="searchMap()" class="bg-muji-text text-white px-4 py-2 rounded-sm text-[10px] font-bold tracking-widest hover:bg-black">SEARCH</button>
            </div>
            <p class="text-[9px] text-muji-muted mt-3 italic">* 點擊搜尋後將開啟 Google Maps 查看詳細定位。</p>
        </div>

        <div class="muji-card p-6 mb-8">
            <p class="text-[10px] text-muji-muted mb-4 uppercase tracking-widest font-bold">Emergency Contacts / 緊急聯繫</p>
            <div class="space-y-2 text-sm">
                <p><span class="font-bold">Police (警察):</span> 110 | <span class="font-bold">Ambulance (救護):</span> 119</p>
                <p class="pt-4 text-[10px] font-bold uppercase tracking-widest text-muji-muted">Accommodation / 住宿資訊</p>
                <div class="space-y-4 mt-2">
                    <div>
                        <p class="font-bold text-base">Hotel Resol Nagoya</p>
                        <p class="text-xs text-muji-muted italic">名古屋站步行4分鐘。U8出口到達！</p>
                    </div>
                    <div>
                        <p class="font-bold text-base">Comfort Hotel Ise</p>
                        <p class="text-xs text-muji-muted italic">伊勢市站南口步行3分鐘。</p>
                    </div>
                    <div>
                        <p class="font-bold text-base">Nagoya JR Gate Tower Hotel</p>
                        <p class="text-xs text-muji-muted italic">直通 JR 名古屋站，百貨公司上方。</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Bottom Navigation -->
    <nav class="fixed bottom-0 left-0 right-0 bg-white/95 backdrop-blur-md border-t border-muji-border px-6 pt-3 pb-6 z-50 flex justify-between items-center">
        <button onclick="switchTab('plan')" class="nav-btn active flex flex-col items-center w-12" data-target="plan">
            <i class="fa-regular fa-calendar text-xl mb-1"></i>
            <span class="text-[9px] font-bold tracking-widest">PLAN</span>
        </button>
        <button onclick="switchTab('guide')" class="nav-btn flex flex-col items-center w-12" data-target="guide">
            <i class="fa-regular fa-map text-xl mb-1"></i>
            <span class="text-[9px] font-bold tracking-widest">GUIDE</span>
        </button>
        <button onclick="switchTab('wallet')" class="nav-btn flex flex-col items-center w-12" data-target="wallet">
            <i class="fa-solid fa-yen-sign text-xl mb-1"></i>
            <span class="text-[9px] font-bold tracking-widest">WALLET</span>
        </button>
        <button onclick="switchTab('lists')" class="nav-btn flex flex-col items-center w-12" data-target="lists">
            <i class="fa-regular fa-clipboard text-xl mb-1"></i>
            <span class="text-[9px] font-bold tracking-widest">LISTS</span>
        </button>
        <button onclick="switchTab('info')" class="nav-btn flex flex-col items-center w-12" data-target="info">
            <i class="fa-solid fa-circle-info text-xl mb-1"></i>
            <span class="text-[9px] font-bold tracking-widest">INFO</span>
        </button>
    </nav>

    <script>
        const tripData = [
            { day: 1, date: "1/2 (週五)", weather: "晴時々曇", items: [{ time: "14:30", title: "UO680抵達", desc: "中部國際機場 (NGO)" }, { time: "18:00", title: "榮町商圈", desc: "綠洲21夜景及散步" }] },
            { day: 2, date: "1/3 (週六)", weather: "晴", items: [{ time: "09:00", title: "TSUBAME PAN＆Milk名站店", desc: "名古屋必吃早餐-紅豆吐司" }, { time: "10:30", title: "名古屋城/德川園", desc: "新春市集活動" }, { time: "15:00", title: "名花之里", desc: "觀賞冬季點燈" }] },
            { day: 3, date: "1/4 (週日)", weather: "晴", items: [{ time: "10:10", title: "近鐵特急", desc: "近鐵名古屋往伊勢市" }, { time: "15:00", title: "伊勢神宮", desc: "外宮參拜" }] },
            { day: 4, date: "1/5 (週一)", weather: "多雲", items: [{ time: "09:00", title: "伊勢神宮", desc: "內宮參拜及逛御蔭橫丁" }, { time: "15:19", title: "觀賞夫婦岩", desc: "搭乘CAN Bus由內宮前往二見浦表參道" }] },
            { day: 5, date: "1/6 (週二)", weather: "晴", items: [{time: "10:00", title: "松阪", desc: "松阪城附近散步兩小時及午飯"}, { time: "16:15", title: "近鐵特急", desc: "伊勢市往近鐵名古屋" }] },
            { day: 6, date: "1/7 (週三)", weather: "雪/晴", items: [{ time: "08:15", title: "高山市及白川鄉一日遊", desc: "世界遺產合掌村與飛驒高山老街" }, { time: "11:00", title: "飛驒高山古街", desc: "兩小時閒逛及午餐" }, { time: "14:30", title: "白川鄉", desc: "展望台及合掌村觀光90分鐘" }, { time: "18:30", title: "名古屋站", desc: "行程結束" }] },
            { day: 7, date: "1/8 (週四)", weather: "晴", items: [{ time: "10:00", title: " 大須商店街", desc: "手信與百貨衝刺購物時間" }, { time: "19:00", title: "馬喰一代 名古屋EAST", desc: "人氣飛驒牛燒肉店" }] },
            { day: 8, date: "1/9 (週五)", weather: "晴", items: [{time: "12:31", title: "名鐵特急", desc: "名鐵名古屋往中部國際空港" }, { time: "19:15", title: "UO681抵港", desc: "香港國際機場 (HKG)" }] }
        ];

        function switchTab(id) {
            document.querySelectorAll('.page-section').forEach(p => p.classList.remove('active'));
            document.getElementById('page-' + id).classList.add('active');
            document.querySelectorAll('.nav-btn').forEach(b => {
                b.classList.remove('active');
                if(b.dataset.target === id) b.classList.add('active');
            });
            window.scrollTo(0,0);
        }

        function renderItinerary() {
            const container = document.getElementById('itinerary-list');
            if(!container) return;
            container.innerHTML = tripData.map(day => `
                <div class="mb-10">
                    <div class="flex items-center gap-4 mb-4">
                        <div class="w-12 h-12 bg-muji-red text-white flex flex-col items-center justify-center rounded-sm">
                            <span class="text-[9px] font-bold">DAY</span>
                            <span class="text-lg font-bold">${day.day}</span>
                        </div>
                        <div>
                            <h3 class="font-bold text-sm tracking-tight">${day.date}</h3>
                            <p class="text-[10px] font-bold text-muji-muted uppercase tracking-widest">${day.weather}</p>
                        </div>
                    </div>
                    <div class="space-y-4 ml-6 border-l border-muji-border pl-6">
                        ${day.items.map(item => `
                            <div class="relative">
                                <div class="absolute -left-[31px] top-2 w-2 h-2 rounded-full bg-muji-border border-2 border-white"></div>
                                <div class="flex flex-col">
                                    <span class="text-[10px] font-bold font-mono text-muji-muted">${item.time}</span>
                                    <h4 class="text-sm font-bold text-muji-text">${item.title}</h4>
                                    <p class="text-xs text-stone-500 mt-0.5">${item.desc}</p>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `).join('');
        }

        function updateAllCalculations() {
            calculate();
            splitBill();
            updateFund();
        }

        function calculate() {
            const jpy = document.getElementById('calc-input').value;
            const rate = document.getElementById('exchange-rate').value;
            const res = (jpy * rate).toFixed(2);
            document.getElementById('calc-result').textContent = res + ' HKD';
        }

        function splitBill() {
            const total = parseFloat(document.getElementById('split-total').value);
            const people = parseInt(document.getElementById('split-people').value);
            const rate = parseFloat(document.getElementById('exchange-rate').value);
            if (isNaN(total) || isNaN(people) || people <= 0) return;
            const jpyPerPerson = Math.ceil(total / people);
            const hkdPerPerson = (jpyPerPerson * rate).toFixed(2);
            document.getElementById('res-jpy-person').textContent = '¥ ' + jpyPerPerson.toLocaleString();
            document.getElementById('res-hkd-person').textContent = '$ ' + hkdPerPerson;
        }

        function updateFund() {
            const inbound = parseFloat(document.getElementById('fund-inbound').value) || 0;
            const expenses = parseFloat(document.getElementById('fund-expenses').value) || 0;
            const rate = parseFloat(document.getElementById('exchange-rate').value) || 0.052;
            const balanceJpy = inbound - expenses;
            const balanceHkd = (balanceJpy * rate).toFixed(2);
            document.getElementById('fund-balance-jpy').textContent = '¥ ' + balanceJpy.toLocaleString();
            document.getElementById('fund-balance-hkd').textContent = '$ ' + balanceHkd;
            const balanceBox = document.getElementById('fund-balance-jpy');
            if(balanceJpy < 0) balanceBox.classList.add('text-muji-red');
            else balanceBox.classList.remove('text-muji-red');
        }

        function searchMap() {
            const query = document.getElementById('map-query').value;
            if(!query) return;
            const url = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(query)}`;
            window.open(url, '_blank');
        }

        window.onload = renderItinerary;
    </script>
</body>
</html>
